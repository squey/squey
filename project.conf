# Unique project name
name: squey

# This project uses features which were added in :
min-version: 2.0

(@):
- buildstream/app.yml

# Subdirectory where elements are stored
element-path: buildstream/elements

plugins:
- origin: local
  #path: buildstream/plugins/elements
  path: buildstream/plugins/bst-plugins-experimental/src/bst_plugins_experimental/elements
  elements:
    - flatpak_image
    - flatpak_repo

- origin: local
  path: buildstream/plugins/sources
  sources:
    - ostree

- origin: local
  path: buildstream/plugins/bst-plugins-experimental/src/bst_plugins_experimental/sources
  sources:
    - git_tag

#- origin: local
#  path: buildstream/plugins/buildstream-plugins/src/buildstream_plugins/elements
#  elements:
#    - cmake
#    - autotools

- origin: local
  path: buildstream/plugins/buildstream-plugins/src/buildstream_plugins/sources
  sources:
  - cargo
  - git
  - patch

- origin: local
  path: buildstream/plugins/buildstream-plugins/src/buildstream_plugins/elements
  elements:
  - autotools
  - cmake
  - make
  - meson
  - setuptools

options:

  user_target:
    type: enum
    description: The intended user type build
    values:
    - developer
    - customer
    variable: user_target
    default: developer

  cxx_compiler:
    type: enum
    description: The C++ compiler use to build the project
    values:
    - g++
    - clang++
    variable: cxx_compiler
    default: clang++
    
  code_coverage:
    type: bool
    description: Whether to enable code coverage instrumentation
    variable: code_coverage
    default: False
    
  push_artifacts:
    type: bool
    description: Whether to push artifacts to remote cache server
    variable: push_artifacts
    default: False
    
  disable_testsuite:
    type: bool
    description: Whether to disable the testsuite
    variable: disable_testsuite
    default: False

#
#    Artifacts cache server
#
artifacts:
  - url: https://cache.squey.org
    (?):
    - push_artifacts == True:
        push: true
